# File Upload App - 확장자 차단 앱

파일 업로드 시 보안 위험이 있는 확장자를 차단하고, 고정/커스텀 확장자 정책을 관리하는 과제입니다.

## 주요 기능
- 고정 확장자 목록 제공 및 체크 상태 저장
- 커스텀 확장자 추가/삭제 및 목록 표시
- 업로드 시 차단 정책 적용
- UI에서 고정/커스텀 확장자 정책 관리

## 추가로 고려한 사항
- 커스텀 확장자 중복 체크(고정 목록과도 중복 금지)
- 빈 값/공백 입력 방지, 입력값 정규화(앞의 점 제거, 소문자화)
- 동시성 이슈 방지를 위해 커스텀 추가 시 `PESSIMISTIC_WRITE` 적용
- 확장자 유효성 검사: 영문 소문자/숫자만 허용
- 예외를 타입별로 분리해 글로벌 핸들러에서 일관 처리
- 커스텀 200개 제한을 중복 체크보다 먼저 처리

## 설계 의도
- 확장자명은 실행 여부, 열기 방식, 보안 정책 등을 빠르게 식별하기 위한 논리적 타입
- 고정 확장자는 자주 차단하는 목록을 빠르게 적용하기 위한 정책
- 기본값을 unchecked로 둔 이유는 관리자에게 명시적 선택 권한을 주기 위함
- 최대 입력 길이는 저장 공간보다는 입력 통제와 UI 안정성 목적

## 고정/커스텀 데이터 분리 이유
- 고정 확장자는 활성화 여부를 토글해야 하지만, 커스텀은 존재 자체가 차단 의미
- 한 테이블로 합치면 추가 필드(예: type, enabled)가 필요해지고 복잡도가 증가

## 데이터 초기화 방식
- `SeedDataRunner`에서 고정 확장자 기본 목록을 초기화
- `data.sql`과 달리 애플리케이션 실행 시 비즈니스 로직과 연계된 동적 초기화 가능

## 기술 스택
- Java 17, Spring Boot, Spring Data JPA, Thymeleaf, H2
- Gradle

## 실행 방법
1) 의존성 설치 및 실행
```bash
./gradlew bootRun
```

2) 접속
- `http://localhost:8080`
- H2 콘솔: `http://localhost:8080/h2-console`

## API 요약
- `GET /api/v1/extensions/fixed` 고정 확장자 조회
- `PUT /api/v1/extensions/fixed/{ext}` 고정 확장자 활성화 변경
- `GET /api/v1/extensions/custom` 커스텀 확장자 조회
- `POST /api/v1/extensions/custom` 커스텀 확장자 추가
- `DELETE /api/v1/extensions/custom/{id}` 커스텀 확장자 삭제
- `POST /api/v1/upload` 파일 업로드(차단 정책 적용)

## 기본 설정
- 기본 고정 확장자: `exe`, `bat`, `cmd`, `com`, `cpl`, `scr`, `js`
- 업로드 제한: 10MB

## 제한/주의 사항
- 인증/권한 분리가 없음(실서비스에서는 관리자/사용자 권한 분리 필요)
- 업로드는 임시 파일 저장 방식이며, 실제 서비스에서는 별도 스토리지/보안 정책 적용 필요
